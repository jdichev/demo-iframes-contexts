<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>

    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", function () {
        var frameBody = aframe.contentDocument.body;
        var frameScript = aframe.contentDocument.createElement('script');
          frameScript.innerText = "setTimeout(function () {" +
                                  " var delay = 5;  " +
                                  " var now = new Date(); " +
                                  " var desiredTime = new Date().setSeconds(now.getSeconds() + delay); " +

                                  " while (now < desiredTime) { " +
                                  "     now = new Date(); " +
                                  " } " +

                                  " console.log('framescript is ready');" +
                                  "}, 500);";
        frameBody.appendChild(frameScript);
      });
    </script>
  </head>
  <body>
    <iframe id='aframe' src="about:blank"></iframe>
    <script type="text/javascript">
      setInterval(function () {
        console.log('main frame log - this will get delayed after the script in iframe executes');
      }, 300);
    </script>
  </body>
</html>
